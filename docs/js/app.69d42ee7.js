(function(t){function e(e){for(var n,a,l=e[0],r=e[1],c=e[2],d=0,p=[];d<l.length;d++)a=l[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&p.push(i[a][0]),i[a]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),o()}function o(){for(var t,e=0;e<s.length;e++){for(var o=s[e],n=!0,l=1;l<o.length;l++){var r=o[l];0!==i[r]&&(n=!1)}n&&(s.splice(e--,1),t=a(a.s=o[0]))}return t}var n={},i={app:0},s=[];function a(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=n,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(o,n,function(e){return t[e]}.bind(null,n));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=r;s.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";o("85ec")},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o(t.currentTabComponent,{tag:"component",attrs:{switchPage:t.switchPage}})],1)},s=[],a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex","flex-flow":"column"}},[o("div",{style:{background:"#0a1e39",padding:"12px 20px"}},[o("div",{style:{color:"white",fontWeight:"bold"}},[o("span",{style:{fontSize:"20px"}},[t._v("文件中转站")]),o("span",{style:{fontSize:"16px",marginLeft:"8px"}})])]),o("div",{staticClass:"main-content"},[o("div",{style:{width:"100%",fontSize:"30px",marginBottom:"24px"}},[t._v(" 登录 ")]),o("div",{staticClass:"input-title"},[t._v(" 账号 ")]),o("div",{style:{width:"100%"}},[o("el-input",{staticClass:"input",attrs:{placeholder:"请输入账号"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}})],1),o("div",{staticClass:"input-hint"},[t._v(" "+t._s(t.account_hint_text)+" ")]),o("div",{staticClass:"input-title"},[t._v(" 密码 ")]),o("div",{style:{width:"100%"}},[o("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:t.passwd,callback:function(e){t.passwd=e},expression:"passwd"}})],1),o("div",{staticClass:"input-hint"},[t._v(" "+t._s(t.passwd_hint_text)+" ")]),o("div",{style:{width:"100%",marginBottom:"20px"}},[o("el-checkbox",{attrs:{label:"自动登录"},model:{value:t.autoLogin,callback:function(e){t.autoLogin=e},expression:"autoLogin"}})],1),o("div",{style:{width:"100%",height:"40px",marginTop:"0"}},[o("el-button",{style:{width:"100%",height:"100%"},attrs:{type:"primary",size:"medium"},on:{click:t.login}},[t._v("登录")])],1)])])},l=[],r="user_token",c="user_id",u="auto_login",d="account";function p(t,e){localStorage.setItem(t,e)}function f(t){return localStorage.getItem(t)}function g(t){localStorage.removeItem(t)}var m={setUserToken:function(t){p(r,t)},getUserToken:function(){return f(r)},removeUserToken:function(){g(r)},setUserId:function(t){p(c,t)},getUserId:function(){return f(c)},removeUserId:function(){g(c)},setAutoLogin:function(t){p(u,t)},getAutoLogin:function(){return f(u)},setUserAccount:function(t){p(d,t)},getUserAccount:function(){return f(d)}},h=m,v=o("1157"),b=o.n(v),y="https://www.jiangshuai.tk:8888/upload_file/",w="login",x="getFileList",_="deleteFile";function k(t,e,o,n){b.a.ajax({url:y+t,type:"POST",data:e,success:o,error:n})}var S,L={login:function(t,e,o,n){k(w,{account:t,password:e},o,n)},getFileList:function(t,e,o,n){k(x,{user_token:e,user_id:t},o,n)},deleteFile:function(t,e,o,n,i){console.log(t,e),k(_,{user_token:e,user_id:t,file_name:o},n,i)}},C=L,T=o("5c96"),U=o.n(T),I={loading:function(t){S=T["Loading"].service({text:t,spinner:"el-icon-loading",background:"#00000080"})},close:function(){S&&S.close()}},F=I,P={components:{},created:function(){var t=h.getAutoLogin()+""==="1",e=h.getUserId(),o=h.getUserToken();console.log(e,o),t&&e&&o&&(n["default"].prototype.global.userToken=o,n["default"].prototype.global.userId=e,n["default"].prototype.global.userAccount=h.getUserAccount(),this.switchPage("Home"))},props:{switchPage:Function},data:function(){return{account:"",passwd:"",account_hint_text:"",passwd_hint_text:"",autoLogin:!1}},methods:{login:function(){var t=this;this.account?(this.account_hint_text="",this.passwd?(this.passwd_hint_text="",F.loading("登录中"),C.login(this.account,this.passwd,(function(e){0!==e.code?t.$notify.error({title:"登录失败",message:"账号或密码错误",duration:5e3}):(h.setAutoLogin(t.autoLogin?1:0),t.autoLogin&&(h.setUserToken(e.user_token),h.setUserId(e.user_id),h.setUserAccount(t.account)),console.log(e,e.user_id,e.user_token),n["default"].prototype.global.userToken=e.user_token,n["default"].prototype.global.userId=e.user_id,n["default"].prototype.global.userAccount=t.account,t.switchPage("Home")),F.close()}),(function(){F.close(),t.$notify.error({title:"登录失败",message:"服务器内部错误",duration:5e3})}))):this.passwd_hint_text="请输入密码!"):this.account_hint_text="请输入账号!"}}},O=P,j=(o("f38f"),o("2877")),z=Object(j["a"])(O,a,l,!1,null,null,null),A=z.exports,$=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0"}},[o("div",{style:{background:"#0a1e39",padding:"12px 20px",display:"flex"}},[o("div",{style:{color:"white",fontWeight:"bold",flex:1}},[o("span",{style:{fontSize:"20px"}},[t._v("文件中转站")]),o("span",{style:{fontSize:"16px",marginLeft:"8px"}})]),o("div",{staticStyle:{"font-size":"20px",background:"white","border-radius":"10px",padding:"0 10px"}},[o("el-dropdown",{staticStyle:{"margin-bottom":"5px",color:"blue"},on:{command:t.handleCommand}},[o("span",{staticClass:"el-dropdown-link"},[t._v(t._s(t.account)),o("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"logout"}},[t._v("退出")])],1)],1)],1)]),o("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[o("div",{},[o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:t.baseUrl+"upload",data:t.uploadData,multiple:!1,name:"file","on-success":t.onUploadSuccess}},[o("i",{staticClass:"el-icon-upload"}),o("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),o("em",[t._v("点击上传")])]),o("div",{staticClass:"el- upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("文件大小限制4GB")])])],1),o("div",{staticStyle:{height:"20px","margin-top":"30px","margin-bottom":"30px"}},[t.uploadSuccess?o("el-button",{attrs:{type:"text"},on:{click:t.copy}},[t._v("上传成功,点击复制连接")]):t._e()],1),o("div",[o("el-button",{attrs:{type:"text"},on:{click:t.toFileList}},[t._v("查看已上传文件")])],1)])])},D=[],E={components:{},created:function(){this.account=n["default"].prototype.global.userAccount,this.userId=n["default"].prototype.global.userId,this.userToken=n["default"].prototype.global.userToken,this.uploadData={user_id:this.userId,user_token:this.userToken},console.log(this.uploadData)},props:{switchPage:Function},data:function(){return{account:"",userToken:"",uploadData:{},uploadSuccess:!1,fileUrl:"",baseUrl:y}},methods:{handleCommand:function(t){switch(t){case"logout":n["default"].prototype.global.userId="",n["default"].prototype.global.userToken="",h.removeUserId(),h.removeUserToken(),this.switchPage("LogIn");break}},onUploadSuccess:function(t,e,o){this.uploadSuccess=!0,console.log(t,e,o),this.fileUrl=t.url},copy:function(){var t=document.createElement("input");t.value=this.fileUrl,document.body.appendChild(t),t.select(),console.log(t.value),document.execCommand("Copy"),this.$message({message:"复制成功",type:"success"}),t.remove()},toFileList:function(){this.switchPage("FileList")}}},M=E,H=Object(j["a"])(M,$,D,!1,null,null,null),B=H.exports,W=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0"}},[o("div",{style:{background:"#0a1e39",padding:"12px 20px",display:"flex"}},[o("div",{style:{color:"white",fontWeight:"bold",flex:1}},[o("span",{style:{fontSize:"20px"}},[t._v("文件中转站")]),o("span",{style:{fontSize:"16px",marginLeft:"8px"}})]),o("div",{staticStyle:{"font-size":"20px",background:"white","border-radius":"10px",padding:"0 10px"}},[o("el-dropdown",{staticStyle:{"margin-bottom":"5px",color:"blue"},on:{command:t.handleCommand}},[o("span",{staticClass:"el-dropdown-link"},[t._v(t._s(t.account)),o("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"logout"}},[t._v("退出")])],1)],1)],1)]),o("el-button",{staticStyle:{"margin-left":"20px","margin-top":"10px"},attrs:{type:"text"},on:{click:t.back}},[o("i",{staticClass:"el-icon-back"}),t._v("返回 ")]),o("div",{staticStyle:{"text-align":"center","margin-top":"10px",height:"100px"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.fileList,border:""}},[o("el-table-column",{attrs:{fixed:"",prop:"name",label:"文件名",width:"130"}}),o("el-table-column",{attrs:{prop:"timeStr",label:"上传日期",width:"130"}}),o("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("a",{attrs:{href:e.row.url,download:e.row.name}},[o("el-button",{attrs:{type:"primary",icon:"el-icon-download",size:"mini",circle:""}})],1),o("a",{staticStyle:{padding:"0 2px"}},[o("el-button",{attrs:{type:"success",icon:"el-icon-copy-document",size:"mini",circle:""},on:{click:function(o){return t.copyUrl(e.row)}}})],1),o("a",[o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:""},on:{click:function(o){return t.deleteFile(e.row)}}})],1)]}}])})],1)],1)],1)},J=[],G=(o("b0c0"),o("fb6a"),{components:{},created:function(){this.userId=n["default"].prototype.global.userId,this.account=n["default"].prototype.global.userAccount,this.userToken=n["default"].prototype.global.userToken,this.getFileList()},props:{switchPage:Function},data:function(){return{account:"",userToken:"",userId:"",uploadData:{},uploadSuccess:!1,fileUrl:"",fileList:[]}},methods:{getFileList:function(){var t=this;C.getFileList(this.userId,this.userToken,(function(e){if(t.fileList=e,console.log(e),t.fileList){for(var o=0;o<t.fileList.length;o++)t.fileList[o].timeStr=t.dateFormat(t.fileList[o].time);t.fileList=t.fileList.sort((function(t,e){return e.time-t.time}))}}),(function(){}))},handleCommand:function(t){switch(t){case"logout":n["default"].prototype.global.userId="",n["default"].prototype.global.userToken="",h.removeUserId(),h.removeUserToken(),this.switchPage("LogIn");break}},copy:function(t){var e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select(),console.log(e.value),document.execCommand("Copy"),this.$message({message:"复制成功",type:"success"}),e.remove()},back:function(){this.switchPage("Home")},copyUrl:function(t){this.copy(t.url),console.log(t)},deleteFile:function(t){var e=this;C.deleteFile(this.userId,this.userToken,t.name,(function(t){console.log(t),0==t.code&&(e.$message({message:"删除成功",type:"success"}),e.getFileList())}),(function(){e.$message({message:"删除失败",type:"error"})}))},dateFormat:function(t){var e=new Date(1e3*t);console.log(1e3*t);var o=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),i=("0"+e.getDate()).slice(-2),s=("0"+e.getHours()).slice(-2),a=("0"+e.getMinutes()).slice(-2),l=o+"."+n+"."+i+" "+s+":"+a;return l}}}),Y=G,q=Object(j["a"])(Y,W,J,!1,null,null,null),K=q.exports,N={name:"App",data:function(){return{currentTabComponent:A}},metaInfo:{meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"}]},methods:{switchPage:function(t){this.currentTabComponent=t}},components:{LogIn:A,Home:B,FileList:K}},Q=N,R=(o("034f"),Object(j["a"])(Q,i,s,!1,null,null,null)),V=R.exports,X=(o("0fae"),o("58ca")),Z=o("3a9f"),tt=o.n(Z);n["default"].use(X["a"]),n["default"].prototype.global=tt.a,n["default"].use(U.a),n["default"].config.productionTip=!1,new n["default"]({render:function(t){return t(V)}}).$mount("#app")},"730a":function(t,e,o){},"85ec":function(t,e,o){},f38f:function(t,e,o){"use strict";o("730a")}});
//# sourceMappingURL=app.69d42ee7.js.map